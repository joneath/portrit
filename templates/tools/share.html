<!DOCTYPE html>
<html>
  	<head>
		<title>Share on Portrit</title>
		<style>
			html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, canvas{
				border:0 none;
			    font-family:inherit;
			    font-size:100%;
			    font-style:inherit;
			    font-weight:inherit;
			    margin:0;
			    outline-color:-moz-use-text-color;
			    outline-style:none;
			    outline-width:0;
			    padding:0;
			    vertical-align:baseline;
			}

			tr, th, td{
			    font-family:inherit;
			    font-size:100%;
			    font-style:inherit;
			    font-weight:inherit;
			    margin:0;
			    outline-color:-moz-use-text-color;
			    outline-style:none;
			    outline-width:0;
			    padding:0;
			    vertical-align:baseline;
			}

			html, body{
			    height:             100%;
				overflow-x:			hidden;
			}

			body{
				background-color:	#000;
			    color:              #333;
				font-family:        Helvetica, Arial, Verdana, sans-serif;
			    width:              550px;
			}

			strong{
			    font-weight:        bold;
			}

			.clear{
			    clear:              both;
			}
			
			#loading_cont{
				background:         url(http://portrit.s3.amazonaws.com/img/landing_back.jpg) no-repeat;
				color:				#fff;
				padding-top:		250px;
				text-align:			center;
			}
			
				#loading_cont h1{
					font-size:			30px;
					font-weight:		bold;
					margin-bottom:		30px;
				}
				
			#login_cont{
				background:         url(http://portrit.s3.amazonaws.com/img/landing_back.jpg) no-repeat;
				color:				#fff;
				text-align:			center;
			}
			
				#login_cont > img {
					display:			block;
					margin:				0 auto;
					margin-bottom:		20px;
					padding-top:		130px;
				}
				
				#login_cont #login{
					margin-bottom:		20px;
				}
				
				#login_cont h2{
					font-size:			18px;
					margin:				0px 20px;
				}
			
			#cont{
				height:				500px;
				width:				550px;
			}
			
			#header{
				background-color:	#222;
				padding:			10px;
			}
			
				#header img{
					float:				left;
					height:				70px;
				}
			
				#header h1{
					color:				#fff;
					float:				right;
					font-size:			26px;
					font-weight:		bold;
					margin-top:			5px;
				}
				
				#header h2{
					color:				#eee;
					float:				right;
					font-size:			16px;
				}
				
				#header p{
					color:				#fff;
					float:				right;
					line-height:		25px;
					margin-right:		5px;
				}
				
				#header #user{
					float:				right;
					height:				25px;
					width:				25px;
				}
			
			#img_cont{
				background-color:	#000;
				float:				left;
				padding:			10px;
				height:				330px;
				width:				380px;
				text-align:			center;
				position:			relative;
			}
			
				#img_wrap{
					display:			table-cell;
					vertical-align:		middle;
					height:				330px;
					width:				380px;
				}
			
				#img_wrap img{
					max-width:			380px;
					max-height:			330px;
				}
				
				#img_cont #selected_trophy{
					position:			absolute;
					bottom:				0px;
					left:				5px;
				}
			
			#trophy_cont{
				background-color:   #222;
                opacity:            1.0;
                text-align:         center;
				float:				left;
				height:				350px;
				overflow-y:			auto;
				overflow-x:			hidden;
				width:				150px;
				-webkit-box-shadow:     inset rgba(0, 0, 0, 0.496094) 0px 0px 8px 3px;
                -moz-box-shadow:        inset 0px 0px 8px 3px rgba(0, 0, 0, 0.5);
                box-shadow:             inset rgba(0, 0, 0, 0.496094) 0px 0px 8px 3px;
			}
			
				#trophy_cont ul{
					list-style:			none;
				}
			
				#trophy_cont li{
					color:				#fff;
					cursor:				pointer;
					text-align:			center;
                    margin-left:        10px;
                    margin-right:       10px;
                    padding:            5px 0px;
/*                    width:              90px;*/
                    border-radius:      10px;
                    -moz-border-radius: 10px;
                    -webkit-transition: opacity .3s ease-in-out;
                    -moz-transition: opacity .3s ease-in-out;
                    -o-transition: opacity .3s ease-in-out;
                    transition: opacity .3s ease-in-out;
				}
                    
                        #trophy_cont li.active{
                            cursor:             pointer;
                            opacity:            1.0;
                        }
                        
                        #trophy_cont li.active:hover{
                            background-color:   black;
                        }
                        
                        #trophy_cont li.hover_lock{
                            background-color:   black;
                        }
                        
                        #trophy_cont li.selected{
                            opacity:            0.3;
                        }
                        
                        #trophy_cont li.inactive{
                            opacity:            0.3;
                        }
				
					#trophy_cont li h3{
						font-size:			20px;
						margin-top:			10px;
						margin-bottom:		10px;
					}
			
			#caption_cont{
				height:				105px;
				position:			relative;
				width:				550px;
			}
			
				#caption_cont textarea{
					padding: 			0px;
					margin: 			0px;
					height: 			70px;
					width: 				518px;
					border-left: 		1px solid #DEDEDE;
					border-right: 		1px solid #DEDEDE;
					border-bottom: 		1px solid #DEDEDE;
					border-top: 		none;
					padding: 			15px;
					position: 			relative;
					font-size: 			20px;
					overflow: 			hidden;
					resize: 			none;
				}
				
				#selected_photo_triangle{
					height: 21px;
					width: 35px;
					background-image: url(http://portrit.s3.amazonaws.com/img/sprite.png);
					background-position: -175px -693px;
					position: absolute;
					top: -18px;
					left: 185px;
				}
				
				#caption_cont #text_remail_cont{
					position: 			absolute;
					bottom: 			5px;
					right: 				5px;
				}
			
			#action_row{
				background-color:	#fff;
				padding-bottom:		15px;
				padding-top:		5px;
				width:				550px;
			}
			
				#action_row a{
					float:				right;
					text-align:			center;
					width:				65px;
				}
				
				#action_row #post{
					color:				#99CB6E;
					margin-right:		10px;
				}
				
				#action_row #cancel{
					margin-right:		30px;
				}
			
			.switch_on{
	            cursor:             pointer;
	            height:             43px;
	            width:              117px;
	            background-image:   url(http://portrit.s3.amazonaws.com/img/sprite.png);
	            background-position: -238px -700px;
	        }

	        .switch_off{
	            cursor:             pointer;
	            height:             43px;
	            width:              117px;
	            background-image:   url(http://portrit.s3.amazonaws.com/img/sprite.png);
	            background-position: -369px -700px;
	        }
			
			#share_bottom_cont{
				background-color:	#fff;
				color:				#333;
				padding:			10px;
				width:				530px;
            }

				#share_bottom_cont h1{
					font-size:		24px;
					font-weight:	bold;
				}
            
            #share_left_cont{
                float:              left;
                width:              200px;
            }

				#share_left_cont p{
					margin-top:			5px;
				}
            
            #share_options_cont{
                border:             1px solid #bebebe;
                float:              right;
                width:              325px;
                border-radius:          5px;
                -moz-border-radius:     5px;
            }
            
                #share_options_cont .share_service{
                    height:             48px;
                    padding:            10px;
                }

					#share_options_cont .share_service h1{
						font-size:			18px;
					}
                
                    #share_options_cont #share_mid{
                        background-color:   #bebebe;
                        height:             1px;
                        width:              100%;
                    }
                
                    #share_options_cont .share_service img{
                        float:              left;
                        height:             48px;
                        width:              48px;
                    }
                    
                    #share_options_cont .share_service h1{
                        float:              left;
                        line-height:        48px;
                        margin-left:        20px;
                    }
                    
                    #share_options_cont .share_service .switch{
                        float:              right;
                        margin-top:         3px;
                    }
                    
            #share_nom_cont #share_controls_cont{
                margin-top:             15px;
            }
            
                #share_nom_cont #share_controls_cont span{
                    float:                  right;
                    margin-left:            25px;
                }
                
                #share_nom_cont #post_share{
                    color:                  #99CB6E;
                }


			#saving_cont{
				background:				rgba(0,0,0,.8);
				text-align:				center;
				position:				absolute;
				top:					0px;
				left:					0px;
				width:					100%;
				height:					100%;
			}
			
				#saving_cont h1{
					color:					#fff;
					font-size:				30px;
					font-weight:			bold;
					margin-top:				300px;
					margin-bottom:			20px;
				}
			
			.sick, .sick:visited, .sick_abs{
				background: #222 url(http://portrit.s3.amazonaws.com/img/alert-overlay.png) repeat-x; 
				display: inline-block; 
				padding: 5px 10px 6px; 
				color: #fff; 
				text-decoration: none;
				-moz-border-radius: 5px; 
				border-radius: 5px;
				-moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				-webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				text-shadow: 0 -1px 1px rgba(0,0,0,0.25);
				border-bottom: 1px solid rgba(0,0,0,0.25);
				position: relative;
				cursor: pointer;
			}

			.sick_hover_lock:                            { background-color: #111; color: #fff; }
			.sick:hover, .sick_abs:hover				{ background-color: #111; color: #fff; }
			.sick:active							        { top: 1px; }
			.small.sick, .small.sick:visited 			{ font-size: 11px; padding: ; }
			.sick, .sick:visited, .sick_abs,
			.medium.sick, .medium.sick:visited 		{ font-size: 13px; font-weight: bold; line-height: 1; text-shadow: 0 -1px 1px rgba(0,0,0,0.25); }
			.large.sick, .large.sick:visited, .large.sick_abs  			{ font-size: 14px; padding: 8px 14px 9px; }

			.green.sick, .green.sick:visited, .green.sick_abs		    { background-color: #91bd09; }
			.green.sick:hover, .green.sick_abs:hover				    { background-color: #749a02; }
			.blue.sick, .blue.sick:visited, .blue.sick_abs		        { background-color: #2daebf; }
			.blue.sick:hover, .blue.sick_abs:hover		                { background-color: #007d9a; }
			.red.sick, .red.sick:visited, .red.sick_abs			        { background-color: #e33100; }
			.red.sick:hover, .red.sick_abs:hover					    { background-color: #872300; }
			.magenta.sick, .magenta.sick:visited, .magenta.sick_abs		{ background-color: #a9014b; }
			.magenta.sick:hover, .magenta.sick_abs:hover				{ background-color: #630030; }
			.orange.sick, .orange.sick:visited, .orange.sick_abs		{ background-color: #ff5c00; }
			.orange.sick:hover, .orange.sick_abs:hover					{ background-color: #d45500; }
			.yellow.sick, .yellow.sick:visited, .yellow.sick_abs		{ background-color: #ffb515; }
			.yellow.sick:hover							{ background-color: #fc9200; }
			
			.trophy_img{
			    margin:         0 auto;
			}

			    .trophy_img.large{
			        height:         200px;
			        width:          100px;
			    }

			        .trophy_img.large.artsy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -20px -84px;
			        }
			        .trophy_img.large.wtf{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -119px -84px;
			        }
			        .trophy_img.large.party_animal{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -219px -84px;
			        }
			        .trophy_img.large.lol{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -316px -84px;
			        }
			        .trophy_img.large.blank{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -416px -84px;
			        }
			        .trophy_img.large.fail{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -24px -295px;
			        }
			        .trophy_img.large.creepy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -123px -295px;
			        }
			        .trophy_img.large.hot{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -222px -295px;
			        }
			        .trophy_img.large.cute{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -322px -295px;
			        }

			        .trophy_img.large.awesome{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -601px -141px;
			        }

			        .trophy_img.large.yummy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -601px -388px;
			        }

			    .trophy_img.medium{
			        height:         100px;
			        width:          50px;
			    }

			        .trophy_img.medium.wtf{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -17px -509px;
			        }
			        .trophy_img.medium.party_animal{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -70px -509px;
			        }
			        .trophy_img.medium.lol{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -123px -509px;
			        }
			        .trophy_img.medium.fail{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -177px -509px;
			        }
			        .trophy_img.medium.blank{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -228px -509px;
			        }
			        .trophy_img.medium.hot{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -282px -509px;
			        }
			        .trophy_img.medium.cute{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -334px -509px;
			        }
			        .trophy_img.medium.creepy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -386px -509px;
			        }
			        .trophy_img.medium.artsy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -438px -509px;
			        }

			        .trophy_img.medium.awesome{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -704px -240px;
			        }

			        .trophy_img.medium.yummy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -704px -488px;
			        }

			    .trophy_img.small{
			        height:         50px;
			        width:          25px;
			    }

			        .trophy_img.small.artsy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -25px -621px;
			        }
			        .trophy_img.small.wtf{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -59px -621px;
			        }
			        .trophy_img.small.party_animal{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -93px -621px;
			        }
			        .trophy_img.small.lol{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -126px -621px;
			        }
			        .trophy_img.small.hot{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -159px -621px;
			        }
			        .trophy_img.small.fail{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -192px -621px;
			        }
			        .trophy_img.small.cute{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -224px -621px;
			        }
			        .trophy_img.small.creepy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -256px -621px;
			        }

			        .trophy_img.small.awesome{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -759px -290px;
			        }

			        .trophy_img.small.yummy{
			            background-image:       url(http://portrit.s3.amazonaws.com/img/sprite.png);
			            background-position:    -759px -539px;
			        }
			
		</style>
		
		{% if refresh %}
			<script type="text/javascript">
				var w = 550;
				var h = 860;
				var left = (screen.width/2)-(w/2);
				var top = (screen.height/2)-(h/2);
				
				window.resizeTo(w,h);
				
				// window.open(window.location.href,'null','height=500,width=500,status=no, toolbar=no,menubar=no,location=no')
				// window.open(window.location.href, "extension", 'height=600,width=350');
				window.moveTo(left, top);
				
				// window.close();
			</script>
		{% endif %}
		
		<script src="http://www.google.com/jsapi?key=ABQIAAAAv9UUX4Bh3gRCpbzjSE5MxxSfZ7BxKgj6oXj1KRYYnjuHN0SsnBTx1B5nTeUxCB_k-Yerxn8ZVGvnLA" type="text/javascript"></script>
	    <script type="text/javascript">
	        google.load("jquery", "1.6.1");
	    </script>
		{% if analytics %}
	        <script type="text/javascript">
	          var _gaq = _gaq || [];
	          _gaq.push(['_setAccount', 'UA-17124785-1']);
	          _gaq.push(['_trackPageview']);

	          (function() {
	            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	          })();
	        </script>
	    {% endif %}
		<script>
			// FB Login
			var fb_session = null;
			var my_username = '';
			var twitter_access_token = null;
			var me = null;
			function handleSessionResponse(response){
				if (!response.session) {
					$('#loading_cont').hide();
					$('#login_cont').show();
				}
				else{
					fb_session = response.session;
					$.post('/login_fb_user/', function(data){
			            if (data){
			                var tut_counts = null;
			                var first = false;
			                first = data.first;
			                twitter_access_token = data.twitter_access_token
			                my_username = data.username;
			
							FB.api('/me', function(response) {
								me = response;
								$('#header p').text(my_username);
								$('#user').attr('src', 'https://graph.facebook.com/' + response.id + '/picture?type=square');
							});
			

							
							$('#login_cont').hide();
							$('#loading_cont').hide();
							$('#cont').show();
			            }
			        });
				}
			}
			
			var cat_text_dict = {
	            'hot': 'Hot',
	            'lol': 'LOL',
	            'artsy': 'Artsy',
	            'fail': 'Fail',
	            'party_animal': 'Party Animal',
	            'cute': 'Cute',
	            'wtf': 'WTF',
	            'creepy': 'Creepy',
	            'awesome': 'Awesome',
	            'yummy': 'Yummy'
	        };
			
			var selected_nom = '';
			function render_selected(elm){
				selected_nom = $(elm).attr('id').replace('_cont', '');
				selected_nom = cat_text_dict[selected_nom];
				
				var clone = $(elm).find('.trophy_img').clone();
				$('#selected_trophy').html(clone);
			}
			
			function send_twitter_auth_request(){
		        var callback_url = '';
				var ENV = 'PRODUCTION';
		
		        if (ENV == 'LOCAL'){
		            callback_url = 'http://192.168.1.126:8080/return_twitter/';
		        }
		        else if (ENV == 'TEST'){
		            callback_url = 'http://test.portrit.com/return_twitter/';
		        }
		        else if (ENV == 'PRODUCTION'){
		            callback_url = 'http://portrit.com/return_twitter/';
		        }

		        var twitter_window = window.open('/api/auth_twitter?access_token=' + fb_session.access_token ,"TwitterAuth", "width=800,height=677");
		    }

		    function catch_twitter_access_token(token){
		        twitter_access_token = token;
		
				$('#share_twitter').removeClass('switch_off').addClass('switch_on');
		    }
			
			$(document).ready(function(){
				$('#login').live('click', function(){
					FB.login(handleSessionResponse, {perms:'publish_stream,offline_access,email'});
				});
				
				$('#trophy_cont li').live('click', function(){
					if ($(this).hasClass('active') && !$(this).hasClass('hover_lock')){
						$('#trophy_cont li').not(this).removeClass().addClass('inactive');
						$(this).addClass('hover_lock');
						
						render_selected($(this));
					}
					else if ($(this).hasClass('hover_lock')){
						$('#trophy_cont li').removeClass().addClass('active');
						$('#selected_trophy').html('');
						
						selected_nom = '';
					}
					else{
						// $('#trophy_cont li').removeClass().addClass('active');
						$('#trophy_cont li').removeClass().addClass('inactive');
						$(this).removeClass().addClass('hover_lock').addClass('active');
						
						render_selected($(this));
					}
				});
				
				$('#caption_cont textarea').live('keyup', function(e){
		            var caption_length = $(this).val().length;
		            $('#text_remail_cont').text(caption_length + '/90');
		        });

		        $('#caption_cont textarea').live('keydown', function(e){
		            var caption_length = $(this).val().length;
		            $('#text_remail_cont').text(caption_length + '/90');
		            if (caption_length >= 90 && e.keyCode != 8){
		                return false;
		            }
		        });
				
				$('.switch').live('click', function(){
		            if ($(this).hasClass('switch_on')){
		                $(this).removeClass('switch_on').addClass('switch_off');
		            }
		            else{
						if ($(this).attr('name') == 'twitter' && !twitter_access_token){
							send_twitter_auth_request();
						}
						else{
							$(this).removeClass('switch_off').addClass('switch_on');
						}
		            }
			    });
				
				$('#cancel').live('click', function(){
					window.close();
				});
				
				$('#close_win').live('click', function(){
					window.close();
				});
				
				$('#post').live('click', function(){
					var caption = $('#caption_cont textarea').val();
					var img_path = $('#img_wrap img').attr('src');
					
					$('#saving_cont').show();
					
					$.post('/tools/save_share/', {'selected_nom': selected_nom, 'path': img_path, 'caption': caption}, function(data){
						var url = '';
						if (data.photo_id){
							url = 'http://www.portrit.com/#!/' + data.username + '/' + data.photo_id;
						}
						else{
							url = 'http://www.portrit.com/#!/nomination/' + data[0].id;
						}
						
						if ($('#share_facebook').hasClass('switch_on')){
							var title = '';
							var crop = '';
							if (data.photo_id){
								title = me.name.split(' ')[0] + ' shared a photo on Portrit';
								crop = data.thumb;
							}
							else{
								title = me.name.split(' ')[0] + ' nominated a photo on Portrit';
								crop = data[0].photo.crop_small;
							}
							
							$.post('/api/shorten_url/', {'url': url}, function(data){
					            url = data.url;
					            FB.api('/me/feed', 'post', {
					                'message': caption,
					                'caption': caption,
					                'link': url,
					                'picture': crop,
					                'name': title
					            }, function(response){

					            });
					        });
			            }
			            if ($('#share_twitter').hasClass('switch_on')){
							if (data.photo_id){
								url = 'http://www.portrit.com/#!/' + data.username + '/' + data.photo_id;
							}
							else{
								url = 'http://www.portrit.com/#!/nomination/' + data[0].id;
							}
							$.post('/api/share_twitter/', {'access_token': fb_session.access_token, 'status': caption, 'url': url}, function(data){

					        });
			            }
						
						$('#saving_cont').html('<h1>Completed!</h1><a id="close_win" class="sick large">Close Window</a>');
					});
				});
				
				$('#caption_cont textarea').trigger('keyup');
			});
    	</script>
  	</head>
  	<body>
	    <div id="fb-root"></div>
	    <script type="text/javascript">
	    	if (window.location.hostname == 'portrit.com' || window.location.hostname == 'www.portrit.com' || window.location.hostname == 'm.portrit.com'){
	    	    window.fbAsyncInit = function() {
	                FB.init({appId: '126374870731237', status: true, cookie: true, xfbml: true});
	                // clearTimeout(fb_server_timeout);
	                // fb_server_timeout = setTimeout(fb_down, 6000);
	                FB.getLoginStatus(handleSessionResponse);
	            };
	        }
	        else if (window.location.hostname == 'test.portrit.com' || window.location.hostname == 'new.portrit.com'){
	            window.fbAsyncInit = function() {
	                FB.init({appId: '123063501058161', status: true, cookie: true, xfbml: true});
	                // clearTimeout(fb_server_timeout);
	                // fb_server_timeout = setTimeout(fb_down, 6000);
	                FB.getLoginStatus(handleSessionResponse);
	            };
	        }
	        else{
	            window.fbAsyncInit = function() {
	                FB.init({appId: '155664697800227', status: true, cookie: true, xfbml: true});
	                // clearTimeout(fb_server_timeout);
	                // fb_server_timeout = setTimeout(fb_down, 6000);
	                FB.getLoginStatus(handleSessionResponse);
	            };
	        }

	        (function() {
	            var e = document.createElement('script');
	            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
	            e.async = true;
	            document.getElementById('fb-root').appendChild(e);
	        }());
	    </script>
		<div id="cont" style="display:none;">
			<div id="header">
				<img id="logo" src="http://portrit.s3.amazonaws.com/img/logo_blank.png"/>
				<img id="user"/>
				<p></p>
				<div style="clear:right;"></div>
				<h1>Share Photo on Portrit</h2>
				<h2>Nominate photo for a trophy or just post photo.</h2>
				<div class="clear"></div>
			</div>
			<div id="img_cont">
				<div id="img_wrap">
					<img src="{{ path }}" source="{{ page_url }}"/>
				</div>
				<div id="selected_trophy"></div>
			</div>
			<div id="trophy_cont">
				<ul>
                    <li class="active" id="hot_cont">
                        <div class="trophy_img medium hot"></div>
                        <h3 class="nom_cat_hot_text">Hot</h3>
                    </li>
                    <li class="active" id="lol_cont">
                        <div class="trophy_img medium lol"></div>
                        <h3 class="nom_cat_lol_text">LOL</h3>
                    </li>
                    <li class="active" id="artsy_cont">
                        <div class="trophy_img medium artsy"></div>
                        <h3 class="nom_cat_artsy_text">Artsy</h3>
                    </li>
                    <li class="active" id="fail_cont">
                        <div class="trophy_img medium fail"></div>
                        <h3 class="nom_cat_fail_text">Fail</h3>
                    </li>
                    <li class="active" id="party_animal_cont">
                        <div class="trophy_img medium party_animal"></div>
                        <h3 class="nom_cat_party_animal_text">Party Animal</h3>
                    </li>
                    <li class="active" id="cute_cont">
                        <div class="trophy_img medium cute"></div>
                        <h3 class="nom_cat_cute_text">Cute</h3>
                    </li>
                    <li class="active" id="wtf_cont">
                        <div class="trophy_img medium wtf"></div>
                        <h3 class="nom_cat_wtf_text">WTF</h3>
                    </li>
                    <li class="active" id="creepy_cont">
                        <div class="trophy_img medium creepy"></div>
                        <h3 class="nom_cat_creepy_text">Creepy</h3>
                    </li>
                    <li class="active" id="awesome_cont">
                        <div class="trophy_img medium awesome"></div>
                        <h3 class="nom_cat_awesome_text">Awesome</h3>
                    </li>
                    <li class="active" id="yummy_cont">
                        <div class="trophy_img medium yummy"></div>
                        <h3 class="nom_cat_yummy_text">Yummy</h3>
                    </li>
                </ul>
			</div>
			<div class="clear"></div>
			<div id="caption_cont">
				<div id="selected_photo_triangle"></div>
				<textarea>Source: {{ page_url }}</textarea>
				<div id="text_remail_cont">0/90</div>
			</div>
			<div id="share_bottom_cont">
				<div id="share_left_cont">
					<h1>Sharing Options</h1>
					<p>Share your nomination on Facebook or Twitter.</p>
				</div>
				<div id="share_options_cont">
					<div class="share_service">
						<img src="http://portrit.s3.amazonaws.com/img/f_logo.png">
						<h1>Facebook</h1>
						<div id="share_facebook" class="switch switch_off" value="on" name="facebook"></div>
						<div class="clear"></div>
					</div>
					<div id="share_mid"></div>
					<div class="share_service">
						<img src="http://portrit.s3.amazonaws.com/img/twitter_logo.png">
						<h1>Twitter</h1>
						<div id="share_twitter" class="switch switch_off" value="on" name="twitter"></div>
						<div class="clear"></div>
					</div>
				</div>
				<div class="clear"></div>
			</div>
			<div id="action_row">
				<a class="sick large" id="post">Post</a>
				<a class="sick large" id="cancel">Cancel</a>
				<div class="clear"></div>
			</div>
		</div>
		<div id="login_cont" style="display:none;">
			<img id="logo" src="http://portrit.s3.amazonaws.com/img/logo.png"/>
			<a id="login" class="fb_button fb_button_large">
				<span class="fb_button_text">Login with Facebook</span>
			</a>
			<h2>Please login with Facebook to begin sharing photos on Portrit</h2>
		</div>
		<div id="loading_cont">
			<h1>Loading...</h1>
			<img src="http://portrit.s3.amazonaws.com/img/album-loader-dark.gif"/>
		</div>
		<div id="saving_cont" style="display:none">
			<h1>Saving...</h1>
			<img src="http://portrit.s3.amazonaws.com/img/album-loader-dark.gif"/>
		</div>
  	</body>
</html>